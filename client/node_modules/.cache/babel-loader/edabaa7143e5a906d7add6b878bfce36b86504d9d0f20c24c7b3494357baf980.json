{"ast":null,"code":"var _jsxFileName = \"/Users/joymondal/Documents/Learn/ReactProjects/react-blog/client/src/components/singlePost/SinglePost.js\",\n  _s = $RefreshSig$();\nimport { useLocation } from \"react-router-dom\";\nimport \"./singlePost.css\";\nimport { useEffect, useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { Context } from \"../../context/Context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SinglePost() {\n  _s();\n  const loc = useLocation();\n  const pathId = loc.pathname.split(\"/\")[2]; //used 'pathId' instead of just 'path'\n  const [post, setPost] = useState({});\n  const PF = \"http://localhost:5000/images/\"; // Pubic Folder for Photos\n  const {\n    user\n  } = useContext(Context); //for checking logged in username\n\n  useEffect(() => {\n    const getPost = async () => {\n      const res = await axios.get(\"/posts/\" + pathId); // get() req always returns a Response Type\n      console.log(res.data);\n      setPost(res.data);\n    };\n    let data = getPost();\n    console.log(data);\n  }, [pathId]);\n  const handleDelete = async () => {\n    try {\n      var result = confirm(\"Are you sure to Delete? \");\n      if (result) {\n        await axios.delete(`http://localhost:5000/api/posts/${post._id}`, {\n          data: {\n            username: user.username\n          }\n        });\n        window.location.replace(\"/\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"singlePost\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"singlePostWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"singlePostImg\",\n        src: PF + post.photo,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"singlePostTitle\",\n        children: [post.title,\n        // the user only can edit or update the post - 1. Check the \"username of post\" and \"logged in username\"- context API\n        post.username === (user === null || user === void 0 ? void 0 : user.username) &&\n        /*#__PURE__*/\n        // ?. optional chaing - if there's no user, not gonna bother about .username\n        _jsxDEV(\"div\", {\n          className: \"singlePostEdit\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"singlePostIcon far fa-edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"singlePostIcon far fa-trash-alt\",\n            onClick: handleDelete\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"singlePostInfo\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Author:\", /*#__PURE__*/_jsxDEV(Link, {\n            to: `/?user=${post.username}`,\n            className: \"link\",\n            children: /*#__PURE__*/_jsxDEV(\"b\", {\n              className: \"singlePostAuthor\",\n              children: post.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: new Date(post.createdAt).toDateString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"singlePostDesc\",\n        children: [post.desc, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), \"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Iste error quibusdam ipsa quis quidem doloribus eos, dolore ea iusto impedit! Voluptatum necessitatibus eum beatae, adipisci voluptas a odit modi eos! Lorem, ipsum dolor sit amet consectetur adipisicing elit. Iste error quibusdam ipsa quis quidem doloribus eos, dolore ea iusto impedit! Voluptatum necessitatibus eum beatae, adipisci voluptas a odit modi eos! Lorem, ipsum dolor sit amet consectetur adipisicing elit. Iste error quibusdam ipsa quis quidem doloribus eos, dolore ea iusto impedit! Voluptatum necessitatibus eum beatae, adipisci voluptas a odit modi eos! Lorem, ipsum dolor sit amet consectetur.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(SinglePost, \"eLNe32Ja8R53cieXSM6F4jXPlA8=\", false, function () {\n  return [useLocation];\n});\n_c = SinglePost;\nexport default SinglePost;\nvar _c;\n$RefreshReg$(_c, \"SinglePost\");","map":{"version":3,"names":["useLocation","useEffect","useState","useContext","axios","Link","Context","jsxDEV","_jsxDEV","SinglePost","_s","loc","pathId","pathname","split","post","setPost","PF","user","getPost","res","get","console","log","data","handleDelete","result","confirm","delete","_id","username","window","location","replace","error","className","children","src","photo","alt","fileName","_jsxFileName","lineNumber","columnNumber","title","onClick","to","Date","createdAt","toDateString","desc","_c","$RefreshReg$"],"sources":["/Users/joymondal/Documents/Learn/ReactProjects/react-blog/client/src/components/singlePost/SinglePost.js"],"sourcesContent":["import { useLocation } from \"react-router-dom\";\nimport \"./singlePost.css\";\nimport { useEffect, useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { Context } from \"../../context/Context\";\n\nfunction SinglePost() {\n  const loc = useLocation();\n  const pathId = loc.pathname.split(\"/\")[2]; //used 'pathId' instead of just 'path'\n  const [post, setPost] = useState({});\n  const PF = \"http://localhost:5000/images/\"; // Pubic Folder for Photos\n  const { user } = useContext(Context); //for checking logged in username\n\n  useEffect(() => {\n    const getPost = async () => {\n      const res = await axios.get(\"/posts/\" + pathId); // get() req always returns a Response Type\n      console.log(res.data);\n      setPost(res.data);\n    };\n    let data = getPost();\n    console.log(data);\n  }, [pathId]);\n\n  const handleDelete = async () => {\n    try {\n      var result = confirm(\"Are you sure to Delete? \");\n      if (result) {\n        await axios.delete(`http://localhost:5000/api/posts/${post._id}`, {\n          data: { username: user.username },\n        });\n        window.location.replace(\"/\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return (\n    <div className=\"singlePost\">\n      <div className=\"singlePostWrapper\">\n        <img className=\"singlePostImg\" src={PF + post.photo} alt=\"\" />\n        <h1 className=\"singlePostTitle\">\n          {post.title}\n          {\n            // the user only can edit or update the post - 1. Check the \"username of post\" and \"logged in username\"- context API\n            post.username === user?.username && ( // ?. optional chaing - if there's no user, not gonna bother about .username\n              <div className=\"singlePostEdit\">\n                <i className=\"singlePostIcon far fa-edit\"></i>\n                <i\n                  className=\"singlePostIcon far fa-trash-alt\"\n                  onClick={handleDelete}\n                ></i>\n              </div>\n            )\n          }\n        </h1>\n        <div className=\"singlePostInfo\">\n          <span>\n            Author:\n            <Link to={`/?user=${post.username}`} className=\"link\">\n              <b className=\"singlePostAuthor\">{post.username}</b>\n            </Link>\n          </span>\n          <span>{new Date(post.createdAt).toDateString()}</span>\n        </div>\n        <p className=\"singlePostDesc\">\n          {post.desc}\n          <br />\n          <br />\n          Lorem, ipsum dolor sit amet consectetur adipisicing elit. Iste error\n          quibusdam ipsa quis quidem doloribus eos, dolore ea iusto impedit!\n          Voluptatum necessitatibus eum beatae, adipisci voluptas a odit modi\n          eos! Lorem, ipsum dolor sit amet consectetur adipisicing elit. Iste\n          error quibusdam ipsa quis quidem doloribus eos, dolore ea iusto\n          impedit! Voluptatum necessitatibus eum beatae, adipisci voluptas a\n          odit modi eos! Lorem, ipsum dolor sit amet consectetur adipisicing\n          elit. Iste error quibusdam ipsa quis quidem doloribus eos, dolore ea\n          iusto impedit! Voluptatum necessitatibus eum beatae, adipisci voluptas\n          a odit modi eos! Lorem, ipsum dolor sit amet consectetur.\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default SinglePost;\n"],"mappings":";;AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,OAAO,kBAAkB;AACzB,SAASC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AACvD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,IAAI,QAAQ,kBAAkB;AACvC,SAASC,OAAO,QAAQ,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhD,SAASC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACpB,MAAMC,GAAG,GAAGX,WAAW,CAAC,CAAC;EACzB,MAAMY,MAAM,GAAGD,GAAG,CAACE,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC3C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpC,MAAMe,EAAE,GAAG,+BAA+B,CAAC,CAAC;EAC5C,MAAM;IAAEC;EAAK,CAAC,GAAGf,UAAU,CAACG,OAAO,CAAC,CAAC,CAAC;;EAEtCL,SAAS,CAAC,MAAM;IACd,MAAMkB,OAAO,GAAG,MAAAA,CAAA,KAAY;MAC1B,MAAMC,GAAG,GAAG,MAAMhB,KAAK,CAACiB,GAAG,CAAC,SAAS,GAAGT,MAAM,CAAC,CAAC,CAAC;MACjDU,OAAO,CAACC,GAAG,CAACH,GAAG,CAACI,IAAI,CAAC;MACrBR,OAAO,CAACI,GAAG,CAACI,IAAI,CAAC;IACnB,CAAC;IACD,IAAIA,IAAI,GAAGL,OAAO,CAAC,CAAC;IACpBG,OAAO,CAACC,GAAG,CAACC,IAAI,CAAC;EACnB,CAAC,EAAE,CAACZ,MAAM,CAAC,CAAC;EAEZ,MAAMa,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACF,IAAIC,MAAM,GAAGC,OAAO,CAAC,0BAA0B,CAAC;MAChD,IAAID,MAAM,EAAE;QACV,MAAMtB,KAAK,CAACwB,MAAM,CAAE,mCAAkCb,IAAI,CAACc,GAAI,EAAC,EAAE;UAChEL,IAAI,EAAE;YAAEM,QAAQ,EAAEZ,IAAI,CAACY;UAAS;QAClC,CAAC,CAAC;QACFC,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,GAAG,CAAC;MAC9B;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdZ,OAAO,CAACC,GAAG,CAACW,KAAK,CAAC;IACpB;EACF,CAAC;EACD,oBACE1B,OAAA;IAAK2B,SAAS,EAAC,YAAY;IAAAC,QAAA,eACzB5B,OAAA;MAAK2B,SAAS,EAAC,mBAAmB;MAAAC,QAAA,gBAChC5B,OAAA;QAAK2B,SAAS,EAAC,eAAe;QAACE,GAAG,EAAEpB,EAAE,GAAGF,IAAI,CAACuB,KAAM;QAACC,GAAG,EAAC;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC9DnC,OAAA;QAAI2B,SAAS,EAAC,iBAAiB;QAAAC,QAAA,GAC5BrB,IAAI,CAAC6B,KAAK;QAET;QACA7B,IAAI,CAACe,QAAQ,MAAKZ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEY,QAAQ;QAAA;QAAM;QACpCtB,OAAA;UAAK2B,SAAS,EAAC,gBAAgB;UAAAC,QAAA,gBAC7B5B,OAAA;YAAG2B,SAAS,EAAC;UAA4B;YAAAK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC9CnC,OAAA;YACE2B,SAAS,EAAC,iCAAiC;YAC3CU,OAAO,EAAEpB;UAAa;YAAAe,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAED,CAAC,eACLnC,OAAA;QAAK2B,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7B5B,OAAA;UAAA4B,QAAA,GAAM,SAEJ,eAAA5B,OAAA,CAACH,IAAI;YAACyC,EAAE,EAAG,UAAS/B,IAAI,CAACe,QAAS,EAAE;YAACK,SAAS,EAAC,MAAM;YAAAC,QAAA,eACnD5B,OAAA;cAAG2B,SAAS,EAAC,kBAAkB;cAAAC,QAAA,EAAErB,IAAI,CAACe;YAAQ;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACPnC,OAAA;UAAA4B,QAAA,EAAO,IAAIW,IAAI,CAAChC,IAAI,CAACiC,SAAS,CAAC,CAACC,YAAY,CAAC;QAAC;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnD,CAAC,eACNnC,OAAA;QAAG2B,SAAS,EAAC,gBAAgB;QAAAC,QAAA,GAC1BrB,IAAI,CAACmC,IAAI,eACV1C,OAAA;UAAAgC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACNnC,OAAA;UAAAgC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,+pBAWR;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACjC,EAAA,CA5EQD,UAAU;EAAA,QACLT,WAAW;AAAA;AAAAmD,EAAA,GADhB1C,UAAU;AA8EnB,eAAeA,UAAU;AAAC,IAAA0C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}